'use strict';

var play2 = '';
var play1 = '';
var identifyJ1 = '';
var identifyJ2 = '';
var hits = 0;
var img = '';
var score = document.getElementById('score');
var highScore = document.getElementById('highScore');

var cards = [{ numberCard: '1', selection: false }, { numberCard: '2', selection: false }, { numberCard: '0', selection: false }, { numberCard: '9', selection: false }, { numberCard: '3', selection: false }, { numberCard: '4', selection: false }, { numberCard: '5', selection: false }, { numberCard: '6', selection: false }, { numberCard: '7', selection: false }, { numberCard: '8', selection: false }, { numberCard: '1', selection: false }, { numberCard: '2', selection: false }, { numberCard: '3', selection: false }, { numberCard: '4', selection: false }, { numberCard: '5', selection: false }, { numberCard: '6', selection: false }, { numberCard: '0', selection: false }, { numberCard: '9', selection: false }, { numberCard: '7', selection: false }, { numberCard: '8', selection: false }];

function startGame() {
  cards.sort(function () {
    return 0.5 - Math.random();
  });
  for (var i = 0; i < 20; i += 1) {
    var card = cards[i].numberCard;
    var data = document.getElementById(i.toString());
    data.dataset.valor = card;
    data.src = 'img/' + card + '.png';
  }
  setTimeout(function () {
    for (var _i = 0; _i < 20; _i += 1) {
      var _card = cards[_i].numberCard;
      var _data = document.getElementById(_i.toString());
      _data.dataset.valor = _card;
      _data.src = 'img/bigTop.png';
    }
  }, 3000);
}

function clean() {
  play1 = '';
  play2 = '';
  identifyJ1 = '';
  identifyJ2 = '';
}

function check() {
  hits = 0;
  for (var i = 0; i < 20; i += 1) {
    if (cards[i].selection === true) {
      hits += 1;
    }
  }

  if (hits === 20) {
    document.getElementById('game').innerHTML = 'GANASTE';
    alert('felicidades');
  }
}

function turnLetter() {
  var action = window.event;
  play2 = action.target.dataset.valor;
  identifyJ2 = action.target.id;
  img = action.target;
  var imgP = img.dataset.valor;

  if (play1 !== '') {
    if (play1 === play2 && identifyJ1 !== identifyJ2 && cards[parseInt(identifyJ2, 10)].selection !== true && cards[parseInt(identifyJ1, 10)].selection !== true) {
      cards[parseInt(identifyJ1, 10)].selection = true;
      cards[parseInt(identifyJ2, 10)].selection = true;
      img.src = 'img/' + imgP + '.png';
      score.innerText = hits += 100;
      highScore.innerText = score.innerText;
      check();
      clean();
    } else if (identifyJ1 !== identifyJ2) {
      setTimeout(function () {
        document.getElementById(identifyJ2).src = 'img/bigTop.png';
        document.getElementById(identifyJ1).src = 'img/bigTop.png';
        clean();
        score.innerText = hits -= 50;
        highScore.innerText = score.innerText;
      }, 200);
      img.src = 'img/' + imgP + '.png';
    }
  } else if (play2 !== 'valor') {
    img.src = 'img/' + imgP + '.png';
    play1 = play2;
    identifyJ1 = identifyJ2;
  }
}

function resetGame() {
  cards.sort(function () {
    return 0.5 - Math.random();
  });
  for (var i = 0; i < 20; i += 1) {
    var card = cards[i].numberCard;
    var data = document.getElementById(i.toString());
    data.dataset.id = card;
  }
}
'use strict';

var _vue = require('vue');

var _vue2 = _interopRequireDefault(_vue);

var _App = require('./App');

var _App2 = _interopRequireDefault(_App);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
_vue2.default.config.productionTip = false;

/* eslint-disable no-new */
new _vue2.default({
  el: '#app',
  template: '<App/>',
  components: { App: _App2.default }
});

// Service Worker registration
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function () {
    navigator.serviceWorker.register('/sw.js').then(function (registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function (err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbInBsYXkyIiwicGxheTEiLCJpZGVudGlmeUoxIiwiaWRlbnRpZnlKMiIsImhpdHMiLCJpbWciLCJzY29yZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJoaWdoU2NvcmUiLCJjYXJkcyIsIm51bWJlckNhcmQiLCJzZWxlY3Rpb24iLCJzdGFydEdhbWUiLCJzb3J0IiwiTWF0aCIsInJhbmRvbSIsImkiLCJjYXJkIiwiZGF0YSIsInRvU3RyaW5nIiwiZGF0YXNldCIsInZhbG9yIiwic3JjIiwic2V0VGltZW91dCIsImNsZWFuIiwiY2hlY2siLCJpbm5lckhUTUwiLCJhbGVydCIsInR1cm5MZXR0ZXIiLCJhY3Rpb24iLCJ3aW5kb3ciLCJldmVudCIsInRhcmdldCIsImlkIiwiaW1nUCIsInBhcnNlSW50IiwiaW5uZXJUZXh0IiwicmVzZXRHYW1lIiwiY29uZmlnIiwicHJvZHVjdGlvblRpcCIsImVsIiwidGVtcGxhdGUiLCJjb21wb25lbnRzIiwiQXBwIiwibmF2aWdhdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwicmVnaXN0cmF0aW9uIiwic2NvcGUiLCJlcnIiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsUUFBUSxFQUFaO0FBQ0EsSUFBSUMsUUFBUSxFQUFaO0FBQ0EsSUFBSUMsYUFBYSxFQUFqQjtBQUNBLElBQUlDLGFBQWEsRUFBakI7QUFDQSxJQUFJQyxPQUFPLENBQVg7QUFDQSxJQUFJQyxNQUFNLEVBQVY7QUFDQSxJQUFNQyxRQUFRQyxTQUFTQyxjQUFULENBQXdCLE9BQXhCLENBQWQ7QUFDQSxJQUFNQyxZQUFZRixTQUFTQyxjQUFULENBQXdCLFdBQXhCLENBQWxCOztBQUVBLElBQU1FLFFBQVEsQ0FDWixFQUFFQyxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFEWSxFQUMyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFEM0IsRUFFWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFGWSxFQUUyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFGM0IsRUFHWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFIWSxFQUcyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFIM0IsRUFJWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFKWSxFQUkyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFKM0IsRUFLWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFMWSxFQUsyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFMM0IsRUFNWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFOWSxFQU0yQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFOM0IsRUFPWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFQWSxFQU8yQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFQM0IsRUFRWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFSWSxFQVEyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFSM0IsRUFTWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFUWSxFQVMyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFUM0IsRUFVWixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFWWSxFQVUyQixFQUFFRCxZQUFZLEdBQWQsRUFBbUJDLFdBQVcsS0FBOUIsRUFWM0IsQ0FBZDs7QUFhQSxTQUFTQyxTQUFULEdBQXFCO0FBQ25CSCxRQUFNSSxJQUFOLENBQVcsWUFBTTtB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R0FBUixDQUFZLG9EQUFaLEVBQWtFQyxhQUFhQyxLQUEvRTtBQUNELEtBSEQsRUFHRyxlQUFPO0FBQ1I7QUFDQUgsY0FBUUMsR0FBUixDQUFZLHFDQUFaLEVBQW1ERyxHQUFuRDtBQUNELEtBTkQ7QUFPRCxHQVJEO0FBU0QiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHBsYXkyID0gJyc7XG5sZXQgcGxheTEgPSAnJztcbmxldCBpZGVudGlmeUoxID0gJyc7XG5sZXQgaWRlbnRpZnlKMiA9ICcnO1xubGV0IGhpdHMgPSAwO1xubGV0IGltZyA9ICcnO1xuY29uc3Qgc2NvcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbmNvbnN0IGhpZ2hTY29yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWdoU2NvcmUnKTtcblxuY29uc3QgY2FyZHMgPSBbXG4gIHsgbnVtYmVyQ2FyZDogJzEnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzInLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzAnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzknLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzMnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzQnLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzUnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzYnLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzcnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzgnLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzEnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzInLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzMnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzQnLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzUnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzYnLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzAnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzknLCBzZWxlY3Rpb246IGZhbHNlIH0sXG4gIHsgbnVtYmVyQ2FyZDogJzcnLCBzZWxlY3Rpb246IGZhbHNlIH0sIHsgbnVtYmVyQ2FyZDogJzgnLCBzZWxlY3Rpb246IGZhbHNlIH0sXG5dO1xuXG5mdW5jdGlvbiBzdGFydEdhbWUoKSB7XG4gIGNhcmRzLnNvcnQoKCkgPT4geyByZXR1cm4gMC41IC0gTWF0aC5yYW5kb20oKTsgfSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkgKz0gMSkge1xuICAgIGNvbnN0IGNhcmQgPSBjYXJkc1tpXS5udW1iZXJDYXJkO1xuICAgIGNvbnN0IGRhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpLnRvU3RyaW5nKCkpO1xuICAgIGRhdGEuZGF0YXNldC52YWxvciA9IGNhcmQ7XG4gICAgZGF0YS5zcmMgPSBgaW1nLyR7Y2FyZH0ucG5nYDtcbiAgfVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBjYXJkc1tpXS5udW1iZXJDYXJkO1xuICAgICAgY29uc3QgZGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkudG9TdHJpbmcoKSk7XG4gICAgICBkYXRhLmRhdGFzZXQudmFsb3IgPSBjYXJkO1xuICAgICAgZGF0YS5zcmMgPSAnaW1nL2JpZ1RvcC5wbmcnO1xuICAgIH1cbiAgfSwgMzAwMCk7XG59XG5cbmZ1bmN0aW9uIGNsZWFuKCkge1xuICBwbGF5MSA9ICcnO1xuICBwbGF5MiA9ICcnO1xuICBpZGVudGlmeUoxID0gJyc7XG4gIGlkZW50aWZ5SjIgPSAnJztcbn1cblxuZnVuY3Rpb24gY2hlY2soKSB7XG4gIGhpdHMgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpICs9IDEpIHtcbiAgICBpZiAoY2FyZHNbaV0uc2VsZWN0aW9uID09PSB0cnVlKSB7XG4gICAgICBoaXRzICs9IDE7XG4gICAgfVxuICB9XG5cbiAgaWYgKGhpdHMgPT09IDIwKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKS5pbm5lckhUTUwgPSAnR0FOQVNURSc7XG4gICAgYWxlcnQoJ2ZlbGljaWRhZGVzJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHVybkxldHRlcigpIHtcbiAgY29uc3QgYWN0aW9uID0gd2luZG93LmV2ZW50O1xuICBwbGF5MiA9IGFjdGlvbi50YXJnZXQuZGF0YXNldC52YWxvcjtcbiAgaWRlbnRpZnlKMiA9IGFjdGlvbi50YXJnZXQuaWQ7XG4gIGltZyA9IGFjdGlvbi50YXJnZXQ7XG4gIGNvbnN0IGltZ1AgPSBpbWcuZGF0YXNldC52YWxvcjtcblxuICBpZiAocGxheTEgIT09ICcnKSB7XG4gICAgaWYgKHBsYXkxID09PSBwbGF5MiAmJiBpZGVudGlmeUoxICE9PSBpZGVudGlmeUoyICYmIGNhcmRzW3BhcnNlSW50KGlkZW50aWZ5SjIsIDEwKV0uc2VsZWN0aW9uICE9PSB0cnVlICYmIGNhcmRzW3BhcnNlSW50KGlkZW50aWZ5SjEsIDEwKV0uc2VsZWN0aW9uICE9PSB0cnVlKSB7XG4gICAgICBjYXJkc1twYXJzZUludChpZGVudGlmeUoxLCAxMCldLnNlbGVjdGlvbiA9IHRydWU7XG4gICAgICBjYXJkc1twYXJzZUludChpZGVudGlmeUoyLCAxMCldLnNlbGVjdGlvbiA9IHRydWU7XG4gICAgICBpbWcuc3JjID0gYGltZy8ke2ltZ1B9LnBuZ2A7XG4gICAgICBzY29yZS5pbm5lclRleHQgPSBoaXRzICs9IDEwMDtcbiAgICAgIGhpZ2hTY29yZS5pbm5lclRleHQgPSBzY29yZS5pbm5lclRleHQ7XG4gICAgICBjaGVjaygpO1xuICAgICAgY2xlYW4oKTtcblxuICAgIH0gZWxzZSBpZiAoaWRlbnRpZnlKMSAhPT0gaWRlbnRpZnlKMikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkZW50aWZ5SjIpLnNyYyA9ICdpbWcvYmlnVG9wLnBuZyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkZW50aWZ5SjEpLnNyYyA9ICdpbWcvYmlnVG9wLnBuZyc7XG4gICAgICAgIGNsZWFuKCk7XG4gICAgICAgIHNjb3JlLmlubmVyVGV4dCA9IGhpdHMgLT0gNTA7XG4gICAgICAgIGhpZ2hTY29yZS5pbm5lclRleHQgPSBzY29yZS5pbm5lclRleHQ7XG4gICAgICB9LCAyMDApO1xuICAgICAgaW1nLnNyYyA9IGBpbWcvJHtpbWdQfS5wbmdgO1xuICAgIH0gXG4gIH0gZWxzZSBpZiAocGxheTIgIT09ICd2YWxvcicpIHtcbiAgICAgIGltZy5zcmMgPSBgaW1nLyR7aW1nUH0ucG5nYDtcbiAgICAgIHBsYXkxID0gcGxheTI7XG4gICAgICBpZGVudGlmeUoxID0gaWRlbnRpZnlKMjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlc2V0R2FtZSgpIHtcbiAgY2FyZHMuc29ydCgoKSA9PiB7IHJldHVybiAwLjUgLSBNYXRoLnJhbmRvbSgpOyB9KTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSArPSAxKSB7XG4gICAgY29uc3QgY2FyZCA9IGNhcmRzW2ldLm51bWJlckNhcmQ7XG4gICAgY29uc3QgZGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkudG9TdHJpbmcoKSk7XG4gICAgZGF0YS5kYXRhc2V0LmlkID0gY2FyZDtcbiAgfVxufVxuIiwiLy8gVGhlIFZ1ZSBidWlsZCB2ZXJzaW9uIHRvIGxvYWQgd2l0aCB0aGUgYGltcG9ydGAgY29tbWFuZFxuLy8gKHJ1bnRpbWUtb25seSBvciBzdGFuZGFsb25lKSBoYXMgYmVlbiBzZXQgaW4gd2VicGFjay5iYXNlLmNvbmYgd2l0aCBhbiBhbGlhcy5cbmltcG9ydCBWdWUgZnJvbSAndnVlJ1xuaW1wb3J0IEFwcCBmcm9tICcuL0FwcCdcblxuVnVlLmNvbmZpZy5wcm9kdWN0aW9uVGlwID0gZmFsc2VcblxuLyogZXNsaW50LWRpc2FibGUgbm8tbmV3ICovXG5uZXcgVnVlKHtcbiAgZWw6ICcjYXBwJyxcbiAgdGVtcGxhdGU6ICc8QXBwLz4nLFxuICBjb21wb25lbnRzOiB7IEFwcCB9XG59KVxuXG4vLyBTZXJ2aWNlIFdvcmtlciByZWdpc3RyYXRpb25cbmlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvc3cuanMnKS50aGVuKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6ICcsIHJlZ2lzdHJhdGlvbi5zY29wZSlcbiAgICB9LCBlcnIgPT4ge1xuICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZCA6KFxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJywgZXJyKVxuICAgIH0pXG4gIH0pXG59Il19
